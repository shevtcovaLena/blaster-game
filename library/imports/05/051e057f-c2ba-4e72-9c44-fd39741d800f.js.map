{"version":3,"sources":["assets\\scripts\\core\\GameRules.ts"],"names":[],"mappings":";;;;;;;AAAA,+BAAuC;AAEvC;;GAEG;AACH;IAAA;IAkEA,CAAC;IA3CC;;OAEG;IACI,wBAAc,GAArB,UAAsB,SAAiB;QACrC,IAAI,SAAS,GAAG,IAAI,CAAC,cAAc,EAAE;YACnC,OAAO,CAAC,CAAC;SACV;QACD,OAAO,SAAS,GAAG,SAAS,GAAG,CAAC,CAAC;IACnC,CAAC;IAED;;OAEG;IACI,sBAAY,GAAnB,UAAoB,SAAiB;QACnC,OAAO,SAAS,IAAI,IAAI,CAAC,cAAc,CAAC;IAC1C,CAAC;IAED;;OAEG;IACI,0BAAgB,GAAvB,UAAwB,SAAiB;QACvC,IAAI,SAAS,IAAI,IAAI,CAAC,oBAAoB,EAAE;YAC1C,OAAO,oBAAa,CAAC,UAAU,CAAC;SACjC;QACD,IAAI,SAAS,IAAI,IAAI,CAAC,cAAc,EAAE;YACpC,OAAO,oBAAa,CAAC,IAAI,CAAC;SAC3B;QACD,IAAI,SAAS,IAAI,IAAI,CAAC,sBAAsB,EAAE;YAC5C,OAAO,oBAAa,CAAC,YAAY,CAAC;SACnC;QACD,IAAI,SAAS,IAAI,IAAI,CAAC,mBAAmB,EAAE;YACzC,OAAO,oBAAa,CAAC,SAAS,CAAC;SAChC;QAED,OAAO,oBAAa,CAAC,IAAI,CAAC;IAC5B,CAAC;IAED;;OAEG;IACI,+BAAqB,GAA5B,UAA6B,SAAiB;QAC5C,OAAO,SAAS,IAAI,IAAI,CAAC,oBAAoB,CAAC;IAChD,CAAC;IAhEe,mBAAS,GAAG,CAAC,CAAC;IACd,mBAAS,GAAG,CAAC,CAAC;IAEd,mBAAS,GAAG,GAAG,CAAC;IAChB,sBAAY,GAAG,CAAC,CAAC;IACjB,4BAAkB,GAAG,EAAE,CAAC;IACxB,2BAAiB,GAAG,EAAE,CAAC;IACvB,8BAAoB,GAAG,EAAE,CAAC;IAC1B,8BAAoB,GAAG,EAAE,CAAC;IAC1B,sBAAY,GAAG,CAAC,CAAC;IAEjB,sBAAY,GAAG,IAAI,CAAC;IACpB,mBAAS,GAAG,EAAE,CAAC;IAEf,wBAAc,GAAG,CAAC,CAAC;IAEnB,8BAAoB,GAAG,CAAC,CAAC;IACzB,6BAAmB,GAAG,CAAC,CAAC;IACxB,gCAAsB,GAAG,CAAC,CAAC;IAC3B,wBAAc,GAAG,CAAC,CAAC;IACnB,8BAAoB,GAAG,CAAC,CAAC;IA6C3C,gBAAC;CAlED,AAkEC,IAAA;AAlEY,8BAAS","file":"","sourceRoot":"/","sourcesContent":["import { SuperTileType } from \"./Tile\";\n\n/**\n * Правила игры - константы и формулы\n */\nexport class GameRules {\n  static readonly GRID_COLS = 9;\n  static readonly GRID_ROWS = 9;\n\n  static readonly TILE_SIZE = 100;\n  static readonly TILE_SPACING = 0;\n  static readonly FIELD_PADDING_SIDE = 41;\n  static readonly FIELD_PADDING_TOP = 70;\n  static readonly FIELD_PADDING_BOTTOM = 58;\n  static readonly TILE_VISUAL_OFFSET_Y = 12;\n  static readonly MAX_SHUFFLES = 3;\n\n  static readonly TARGET_SCORE = 1000;\n  static readonly MAX_MOVES = 20;\n\n  static readonly MIN_GROUP_SIZE = 2;\n\n  static readonly SUPER_TILE_MIN_GROUP = 5;\n  static readonly ROW_BLAST_THRESHOLD = 5;\n  static readonly COLUMN_BLAST_THRESHOLD = 6;\n  static readonly BOMB_THRESHOLD = 7;\n  static readonly MEGA_BLAST_THRESHOLD = 9;\n\n  /**\n   * Формула начисления очков за группу\n   */\n  static calculateScore(groupSize: number): number {\n    if (groupSize < this.MIN_GROUP_SIZE) {\n      return 0;\n    }\n    return groupSize * groupSize * 2;\n  }\n\n  /**\n   * Проверка возможности взрыва группы\n   */\n  static isValidGroup(groupSize: number): boolean {\n    return groupSize >= this.MIN_GROUP_SIZE;\n  }\n\n  /**\n   * Определить тип супер-тайла по размеру группы\n   */\n  static getSuperTileType(groupSize: number): SuperTileType {\n    if (groupSize >= this.MEGA_BLAST_THRESHOLD) {\n      return SuperTileType.MEGA_BLAST;\n    }\n    if (groupSize >= this.BOMB_THRESHOLD) {\n      return SuperTileType.BOMB;\n    }\n    if (groupSize >= this.COLUMN_BLAST_THRESHOLD) {\n      return SuperTileType.COLUMN_BLAST;\n    }\n    if (groupSize >= this.ROW_BLAST_THRESHOLD) {\n      return SuperTileType.ROW_BLAST;\n    }\n\n    return SuperTileType.NONE;\n  }\n\n  /**\n   * Проверка необходимости создания супер-тайла\n   */\n  static shouldCreateSuperTile(groupSize: number): boolean {\n    return groupSize >= this.SUPER_TILE_MIN_GROUP;\n  }\n}\n"]}